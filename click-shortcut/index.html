<!DOCTYPE html>
<html>

<body>


   

    <br />
    <br />
    <br />

    <button id="btn-1-id" type="button">Button 1</button>
    <button id="btn-2-id" type="button">Button 2</button>
    <button type="button">Button 2</button>


    <p id="txt-1-id">Text 1</p>
    <p class="txt-2-class">Text 2</p>
    <p>Text 3</p>
    <p class="txt-4-class">Text 4</p>



    <button onclick="saveData()">Save</button>
    <button onclick="deleteData()">Delete</button>
    <button onclick="logData()">Log</button>



    <script>

        //let dataObject = { 'btn-1-id': 2, 'btn-2-id': 2, 'BUTTON[4]': 3, "txt-1-id": 43, "txt-1-id": 1, "txt-2-class": 0, "P[2]": 23 };
        let dataObject = { 'btn-1-id': 2 }
        let pathName =  window.location.pathname;
       

        var output = '';
        for (var property in dataObject) {
            output += '<tr ><td style="border-bottom: 1px solid #BFBEBE;">' + property + '</td><td>' + dataObject[property] + '</td></tr> ';
        }
        var myLayer = document.createElement('div');
        myLayer.id = 'bookingLayer';
        myLayer.style.position = 'absolute';
        myLayer.style.right = '10px';
        myLayer.style.top = '10px';
        myLayer.style.width = '300px';
        myLayer.style.height = 'auto';
        myLayer.style.padding = '10px';
        myLayer.style.background = '#d6d4d4';
        htmlString = ` 
        <table>
            <thead>
                <tr>
                    <th colspan="2" style=" background-color: #333;color: #fff;">${pathName}</th>
                </tr>
            </thead>
            <tbody>
               ${output}
            </tbody>
        </table>
        `;
        myLayer.innerHTML = htmlString;
        document.body.appendChild(myLayer);





        function saveData() {
            localStorage.setItem(pathName, JSON.stringify(dataObject));
        }

        function deleteData() {
            localStorage.removeItem(pathName);
        }

        function logData() {
            var dataObject = localStorage.getItem(pathName);
            console.log("test:" + dataObject);


            if (dataObject !== null) {
                var newObj = JSON.parse(dataObject);
                console.log(newObj);
                console.log(newObj.one);
            }

        }

        function updateDataBobject(newValue) {


            
            newDataObject = { 'btn-1-id': 2, 'btn-2-id': 2, 'BUTTON[4]': 3, "txt-1-id": 43, "txt-1-id": 1, "txt-2-class": 0, "P[2]": 23 };

            console.log("newValue:" + newValue);

            dataObject = newDataObject; 

 
            saveData();
        }




        document.addEventListener("click", function (eventArgs) {

            const elementId = eventArgs.target.id;
            const elementClassName = eventArgs.target.classList[0];

            if (!elementId && !elementClassName && eventArgs.target.nodeName !== "HTML") {

                const elementInnerTxt = eventArgs.target.innerHTML;
                const elementArray = document.getElementsByTagName(eventArgs.target.nodeName);

                for (let i = 0; i < elementArray.length; i++) {

                    if (elementArray[i].innerHTML == elementInnerTxt) {
                        //console.log(eventArgs.target.nodeName + "[" + i + "]");
                        updateDataBobject(eventArgs.target.nodeName + "[" + i + "]");
                    }
                }
            } else
                if (eventArgs.target.id) {
                          //console.log(eventArgs.target.id);
                          updateDataBobject(eventArgs.target.id + "_id");
                } else
                    if (eventArgs.target.classList) {
                          //console.log(eventArgs.target.classList[0])
                          updateDataBobject(eventArgs.target.classList[0] + "_name");
                    }
        });


    </script>

</body>

</html>